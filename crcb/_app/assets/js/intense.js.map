{"version":3,"file":"intense.js","sources":["../_js/intense.js"],"names":["window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","cancelRequestAnimFrame","cancelAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","Intense","extend","target","source","key","applyProperties","properties","style","getFit","heightRatio","innerHeight","h","w","innerWidth","fit","widthRatio","startTracking","passedElements","i","length","track","element","getAttribute","src","addEventListener","init","this","start","loop","stop","looper","positionTarget","lockBody","overflowValue","document","body","overflow","classList","add","unlockBody","remove","createViewer","title","caption","background","containerProperties","backgroundColor","width","height","position","top","left","zIndex","margin","webkitTransition","MozTransition","transition","opacity","container","createElement","appendChild","imageProperties","cursor","captionContainerProperties","fontFamily","bottom","padding","color","wordSpacing","webkitFontSmoothing","textShadow","captionContainer","captionTitleProperties","fontWeight","fontSize","letterSpacing","lineHeight","textAlign","captionTitle","innerHTML","captionTextProperties","maxWidth","marginTop","captionText","setDimensions","mouse","xCurr","xDest","yCurr","yDest","removeViewer","unbindEvents","removeChild","imageDimensions","sourceDimensions","horizontalOrientation","targetDimensions","containerDimensions","overflowArea","x","y","imageSource","img","Image","onload","bindEvents","onMouseMove","onTouchMove","onKeyUp","removeEventListener","event","clientX","clientY","preventDefault","touches","keyCode","KEYCODE_ESC","currentPosition","lastPosition","parseFloat","main","resize"],"mappings":"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","sourcesContent":["window.requestAnimFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          function( callback ){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();\n\nwindow.cancelRequestAnimFrame = ( function() {\n    return window.cancelAnimationFrame          ||\n        window.webkitCancelRequestAnimationFrame    ||\n        window.mozCancelRequestAnimationFrame       ||\n        window.oCancelRequestAnimationFrame     ||\n        window.msCancelRequestAnimationFrame        ||\n        clearTimeout\n} )();\n\n\nvar Intense = (function() {\n\n    'use strict';\n\n    var KEYCODE_ESC = 27;\n\n    // Track both the current and destination mouse coordinates\n    // Destination coordinates are non-eased actual mouse coordinates\n    var mouse = { xCurr:0, yCurr:0, xDest: 0, yDest: 0 };\n\n    var horizontalOrientation = true;\n\n    // Holds the animation frame id.\n    var looper;\n\n    // Current position of scrolly element\n    var lastPosition, currentPosition = 0;\n\n    var sourceDimensions, target;\n    var targetDimensions = { w: 0, h: 0 };\n\n    var container;\n    var containerDimensions = { w: 0, h:0 };\n    var overflowArea = { x: 0, y: 0 };\n\n    // Overflow variable before screen is locked.\n    var overflowValue;\n\n    /* -------------------------\n    /*          UTILS\n    /* -------------------------*/\n\n    // Soft object augmentation\n    function extend( target, source ) {\n\n        for ( var key in source )\n\n            if ( !( key in target ) )\n\n                target[ key ] = source[ key ];\n\n        return target;\n    }\n\n    // Applys a dict of css properties to an element\n    function applyProperties( target, properties ) {\n\n      for( var key in properties ) {\n        target.style[ key ] = properties[ key ];\n      }\n    }\n\n    // Returns whether target a vertical or horizontal fit in the page.\n    // As well as the right fitting width/height of the image.\n    function getFit(\n\n      source ) {\n\n      var heightRatio = window.innerHeight / source.h;\n\n      if( (source.w * heightRatio) > window.innerWidth ) {\n        return { w: source.w * heightRatio, h: source.h * heightRatio, fit: true };\n      } else {\n        var widthRatio = window.innerWidth / source.w;\n        return { w: source.w * widthRatio, h: source.h * widthRatio, fit: false };\n      }\n    }\n\n    /* -------------------------\n    /*          APP\n    /* -------------------------*/\n\n    function startTracking( passedElements ) {\n\n      var i;\n\n      // If passed an array of elements, assign tracking to all.\n      if ( passedElements.length ) {\n\n        // Loop and assign\n        for( i = 0; i < passedElements.length; i++ ) {\n          track( passedElements[ i ] );\n        }\n\n      } else {\n          track( passedElements );\n      }\n    }\n\n    function track( element ) {\n\n      // Element needs a src at minumun.\n      if( element.getAttribute( 'data-image') || element.src ) {\n        element.addEventListener( 'click', function() {\n          init( this );\n        }, false );\n      }\n    }\n\n    function start() {\n      loop();\n    }\n\n    function stop() {\n      cancelRequestAnimFrame( looper );\n    }\n\n    function loop() {\n        looper = requestAnimFrame(loop);\n        positionTarget();\n    }\n\n    // Lock scroll on the document body.\n    function lockBody() {\n\n      overflowValue = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n      document.body.classList.add('intense-open');\n    }\n\n    // Unlock scroll on the document body.\n    function unlockBody() {\n      document.body.style.overflow = overflowValue;\n      document.body.classList.remove('intense-open');\n    }\n\n    function createViewer( title, caption, background ) {\n\n      /*\n       *  Container\n       */\n      var containerProperties = {\n        'backgroundColor': background,\n        'width': '100%',\n        'height': '100%',\n        'position': 'fixed',\n        'top': '0px',\n        'left': '0px',\n        'overflow': 'hidden',\n        'zIndex': '999999',\n        'margin': '0px',\n        'webkitTransition': 'opacity 150ms cubic-bezier( 0, 0, .26, 1 )',\n        'MozTransition': 'opacity 150ms cubic-bezier( 0, 0, .26, 1 )',\n        'transition': 'opacity 150ms cubic-bezier( 0, 0, .26, 1 )',\n        'opacity': '0'\n      }\n      container = document.createElement( 'figure' );\n      container.appendChild( target );\n      applyProperties( container, containerProperties );\n\n      var imageProperties = {\n        'cursor': 'zoom-out',\n      }\n      applyProperties( target, imageProperties );\n\n      /*\n       *  Caption Container\n       */\n      var captionContainerProperties = {\n        'fontFamily': 'Georgia, Times, \"Times New Roman\", serif',\n        'position': 'fixed',\n        'bottom': '0px',\n        'left': '0px',\n        'padding': '20px',\n        'color': '#fff',\n        'wordSpacing': '0.2px',\n        'webkitFontSmoothing': 'antialiased',\n        'textShadow': '-1px 0px 1px rgba(0,0,0,0.4)'\n      }\n      var captionContainer = document.createElement( 'figcaption' );\n      applyProperties( captionContainer, captionContainerProperties );\n\n      /*\n       *  Caption Title\n       */\n      if ( title ) {\n        var captionTitleProperties = {\n          'margin': '0px',\n          'padding': '0px',\n          'fontWeight': 'normal',\n          'fontSize': '40px',\n          'letterSpacing': '0.5px',\n          'lineHeight': '35px',\n          'textAlign': 'left'\n        }\n        var captionTitle = document.createElement( 'h1' );\n        applyProperties( captionTitle, captionTitleProperties );\n        captionTitle.innerHTML = title;\n        captionContainer.appendChild( captionTitle );\n      }\n\n      if ( caption ) {\n        var captionTextProperties = {\n          'margin': '0px',\n          'padding': '0px',\n          'fontWeight': 'normal',\n          'fontSize': '20px',\n          'letterSpacing': '0.1px',\n          'maxWidth': '500px',\n          'textAlign': 'left',\n          'background': 'none',\n          'marginTop': '5px'\n        }\n        var captionText = document.createElement( 'h2' );\n        applyProperties( captionText, captionTextProperties );\n        captionText.innerHTML = caption;\n        captionContainer.appendChild( captionText );\n      }\n\n      container.appendChild( captionContainer );\n\n      setDimensions();\n\n      mouse.xCurr = mouse.xDest = window.innerWidth / 2;\n      mouse.yCurr = mouse.yDest = window.innerHeight / 2;\n\n      document.body.appendChild( container );\n      setTimeout( function() {\n        container.style[ 'opacity' ] = '1';\n      }, 10);\n    }\n\n    function removeViewer() {\n\n      unlockBody();\n      unbindEvents();\n      stop();\n      document.body.removeChild( container );\n    }\n\n    function setDimensions() {\n\n      // Manually set height to stop bug where\n      var imageDimensions = getFit( sourceDimensions );\n      target.width = imageDimensions.w;\n      target.height = imageDimensions.h;\n      horizontalOrientation = imageDimensions.fit;\n\n      targetDimensions = { w: target.width, h: target.height };\n      containerDimensions = { w: window.innerWidth, h: window.innerHeight };\n      overflowArea = {x: containerDimensions.w - targetDimensions.w, y: containerDimensions.h - targetDimensions.h};\n\n    }\n\n    function init( element ) {\n\n      var imageSource = element.getAttribute( 'data-image') || element.src;\n      var title = element.getAttribute( 'data-title');\n      var caption = element.getAttribute( 'data-caption');\n      var background = element.getAttribute( 'data-background') || \"rgba(0,0,0,.8)\";\n\n      var img = new Image();\n      img.onload = function() {\n\n        sourceDimensions = { w: img.width, h: img.height }; // Save original dimensions for later.\n        target = this;\n        createViewer( title, caption, background );\n        lockBody();\n        bindEvents();\n        loop();\n      }\n\n      img.src = imageSource;\n    }\n\n    function bindEvents() {\n\n      container.addEventListener( 'mousemove', onMouseMove,   false );\n      container.addEventListener( 'touchmove', onTouchMove,   false );\n      window.addEventListener(    'resize',    setDimensions, false );\n      window.addEventListener(    'keyup',     onKeyUp,       false );\n      target.addEventListener(    'click',     removeViewer,  false );\n    }\n\n    function unbindEvents() {\n\n      container.removeEventListener( 'mousemove', onMouseMove,   false );\n      container.removeEventListener( 'touchmove', onTouchMove,   false);\n      window.removeEventListener(    'resize',    setDimensions, false );\n      window.removeEventListener(    'keyup',     onKeyUp,       false );\n      target.removeEventListener(    'click',     removeViewer,  false )\n    }\n\n    function onMouseMove( event ) {\n\n      mouse.xDest = event.clientX;\n      mouse.yDest = event.clientY;\n    }\n\n    function onTouchMove( event ) {\n\n      event.preventDefault(); // Needed to keep this event firing.\n      mouse.xDest = event.touches[0].clientX;\n      mouse.yDest = event.touches[0].clientY;\n    }\n\n    // Exit on excape key pressed;\n    function onKeyUp( event ) {\n\n      event.preventDefault();\n      if ( event.keyCode === KEYCODE_ESC ) {\n        removeViewer();\n      }\n    }\n\n    function positionTarget() {\n\n      mouse.xCurr += ( mouse.xDest - mouse.xCurr ) * 0.05;\n      mouse.yCurr += ( mouse.yDest - mouse.yCurr ) * 0.05;\n\n      if ( horizontalOrientation === true ) {\n\n        // HORIZONTAL SCANNING\n        currentPosition += ( mouse.xCurr - currentPosition );\n        if( mouse.xCurr !== lastPosition ) {\n          var position = parseFloat( currentPosition / containerDimensions.w );\n          position = overflowArea.x * position;\n          target.style[ 'webkitTransform' ] = 'translate3d(' + position + 'px, 0px, 0px)';\n          target.style[ 'MozTransform' ] = 'translate3d(' + position + 'px, 0px, 0px)';\n          target.style[ 'msTransform' ] = 'translate3d(' + position + 'px, 0px, 0px)';\n          lastPosition = mouse.xCurr;\n        }\n      } else if ( horizontalOrientation === false ) {\n\n        // VERTICAL SCANNING\n        currentPosition += ( mouse.yCurr - currentPosition );\n        if( mouse.yCurr !== lastPosition ) {\n          var position = parseFloat( currentPosition / containerDimensions.h );\n          position = overflowArea.y * position;\n          target.style[ 'webkitTransform' ] = 'translate3d( 0px, ' + position + 'px, 0px)';\n          target.style[ 'MozTransform' ] = 'translate3d( 0px, ' + position + 'px, 0px)';\n          target.style[ 'msTransform' ] = 'translate3d( 0px, ' + position + 'px, 0px)';\n          lastPosition = mouse.yCurr;\n        }\n      }\n    }\n\n    function main( element ) {\n\n      // Parse arguments\n\n      if ( !element ) {\n        throw 'You need to pass an element!';\n      }\n\n      startTracking( element );\n    }\n\n    return extend( main, {\n        resize: setDimensions,\n        start: start,\n        stop: stop\n    });\n\n})();\n"]}